<!DOCTYPE html><html lang="ko-KR" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="일 전"><meta name="hour-prompt" content="시간 전"><meta name="minute-prompt" content="분 전"><meta name="justnow-prompt" content="방금"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query)" /><meta name="author" content="박 찬영" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="프론트엔드 엔지니어 박찬영입니다." /><meta property="og:description" content="프론트엔드 엔지니어 박찬영입니다." /><link rel="canonical" href="https://univdev.github.io/posts/optimistic-update/" /><meta property="og:url" content="https://univdev.github.io/posts/optimistic-update/" /><meta property="og:site_name" content="Univdev" /><meta property="og:image" content="https://univdev.github.io/assets/post_images/2024-08-29.optimistic-update/2024-08-29-14-52-26.png" /><meta property="og:image:alt" content="낙관적 업데이트" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-08-29T13:57:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://univdev.github.io/assets/post_images/2024-08-29.optimistic-update/2024-08-29-14-52-26.png" /><meta name="twitter:image:alt" content="낙관적 업데이트" /><meta property="twitter:title" content="사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query)" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@박 찬영" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"박 찬영"},"dateModified":"2024-08-29T13:57:00+08:00","datePublished":"2024-08-29T13:57:00+08:00","description":"프론트엔드 엔지니어 박찬영입니다.","headline":"사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query)","image":{"alt":"낙관적 업데이트","url":"https://univdev.github.io/assets/post_images/2024-08-29.optimistic-update/2024-08-29-14-52-26.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://univdev.github.io/posts/optimistic-update/"},"url":"https://univdev.github.io/posts/optimistic-update/"}</script><title>사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query) | Univdev</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Univdev"><meta name="application-name" content="Univdev"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css"> <script src="https://unpkg.com/applause-button/dist/applause-button.js"></script> <script src="https://giscus.app/client.js" data-repo="univdev/univdev.github.io" data-repo-id="R_kgDOKFGzfQ" data-category="Comments" data-category-id="DIC_kwDOKFGzfc4CfAOI" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="ko" crossorigin="anonymous" async> </script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanumgothic.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-T5JJBHH');</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8120097309829946" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T5JJBHH" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="sidebar" class="d-flex flex-column align-items-end" lang="ko-KR"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Univdev</a></div><div class="site-subtitle font-italic">프론트엔드 엔지니어 박찬영입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/recommends/" class="nav-link"> <i class="fa-fw fas fa-thumbs-up ml-xl-3 mr-xl-3 unloaded"></i> <span>추천사</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/univdev" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pcydeveloper','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query)</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/univdev">박 찬영</a> </em></div><div class="d-flex"><div> <span> 게시 <em class="timeago" date="2024-08-29 13:57:00 +0800" data-toggle="tooltip" data-placement="bottom" title="2024-08-29, 13:57 +0800" >2024년 08월 29일</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3016 단어"> <em>16 분</em>읽는 시간</span></div></div></div><div class="post-content"><ul id="toc" class="section-nav"><li class="toc-entry toc-h1"><a href="#낙관적-업데이트-optimistic-update">낙관적 업데이트 (Optimistic Update)</a><li class="toc-entry toc-h1"><a href="#비동기-요청의-문제점">비동기 요청의 문제점</a><li class="toc-entry toc-h1"><a href="#낙관적-업데이트의-principle">낙관적 업데이트의 Principle</a><li class="toc-entry toc-h1"><a href="#react-query를-이용하여-간단하게-적용해보자">React Query를 이용하여 간단하게 적용해보자</a><ul><li class="toc-entry toc-h2"><a href="#usequery의-동작-원리">useQuery의 동작 원리</a><li class="toc-entry toc-h2"><a href="#usemutation에서-인위적으로-데이터-수정하기">useMutation에서 인위적으로 데이터 수정하기</a><li class="toc-entry toc-h2"><a href="#낙관적-업데이트-구현-방법-정리">낙관적 업데이트 구현 방법 정리</a><li class="toc-entry toc-h2"><a href="#네트워크-요청이-실패한다면">네트워크 요청이 실패한다면?</a><ul><li class="toc-entry toc-h3"><a href="#롤백-기능-구현-방법">롤백 기능 구현 방법</a></ul><li class="toc-entry toc-h2"><a href="#데이터-최신화">데이터 최신화</a></ul><li class="toc-entry toc-h1"><a href="#마치며">마치며</a></ul><p><img data-src="/assets/post_images/2024-08-29-optimistic-update/2024-08-29-14-52-26.png" alt="낙관적 업데이트" data-proofer-ignore></p><h1 id="낙관적-업데이트-optimistic-update"> <a class="anchor" href="#%EB%82%99%EA%B4%80%EC%A0%81-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-optimistic-update" aria-hidden="true"><span class="octicon octicon-link"></span></a>낙관적 업데이트 (Optimistic Update)</h1><p>낙관적 업데이트는 서버 혹은 외부 디펜던시에 의존하는 업데이트 요청이 <em>‘반드시 성공할 것’</em> 이라는 믿음 하에 구현하는 업데이트 방식입니다.</p><h1 id="비동기-요청의-문제점"> <a class="anchor" href="#%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%9A%94%EC%B2%AD%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>비동기 요청의 문제점</h1><p>주로 외부 디펜던시에 의존하는 업데이트 방식 (게시글의 작성 혹은 수정)은 비동기 요청으로 진행합니다.<br> 이렇게 처리하는 요청의 경우 응답이 돌아올 때 까지 짧게는 수 ms에서 부터 길게는 10s가 넘는 시간이 소요 될 수 있습니다.</p><p>이런 경우 대부분의 프론트엔드 개발자는 이러한 비동기 요청이 수행되는 과정에서 사용자가 불편함을 느끼지 않도록 Loading Indicator 혹은 Skeleton UI 등의 요소로 <em>“저 지금 열심히 당신의 요청을 처리하고 있어요”</em> 라고 어필을 해야 합니다.<br> 하지만 이러한 로딩 방식은 뭔가 조금 아쉽습니다.<br> Skeleton UI나 Loading Indicator 방식은 작업 상황이 업데이트 중임을 알려줄 수는 있어도 결국 작업 상황이 완료되지 못한 상태이기 때문에 <strong>유의미한 결과를 반영하진 않기 때문입니다.</strong></p><h1 id="낙관적-업데이트의-principle"> <a class="anchor" href="#%EB%82%99%EA%B4%80%EC%A0%81-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%9D%98-principle" aria-hidden="true"><span class="octicon octicon-link"></span></a>낙관적 업데이트의 Principle</h1><p>낙관적 업데이트를 구현하기 위한 원칙(Principle)은 ‘사용자가 낙관적 업데이트를 수행할 수 있는 정보를 제공하느냐’가 관건입니다.</p><p>예를 들자면 사용자가 게시글을 작성하는 경우 아래와 같은 Payload를 제공할 것입니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span>
	<span class="na">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
	<span class="nl">content</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
	<span class="nl">files</span><span class="p">:</span> <span class="p">(</span><span class="nx">File</span> <span class="o">|</span> <span class="kr">string</span><span class="p">)[];</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위와 같이 사용자가 제공한 정보는 게시글 상세 페이지와 목록 페이지를 구현하는데 있어 가장 핵심적인 데이터를 제공하고 있습니다.</p><p>낙관적 업데이트는 사용자가 요청을 보낼 때 제공한 데이터를 기반으로 <strong>‘서버에 반영되지 않은 가짜 데이터’를 UI에 선반영</strong> 하는 방식으로 구현하기에, 사용자가 보낸 데이터가 UI를 구성하는데 부족함이 없는지 우선적으로 판단해야 합니다.</p><h1 id="react-query를-이용하여-간단하게-적용해보자"> <a class="anchor" href="#react-query%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%84%EB%8B%A8%ED%95%98%EA%B2%8C-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>React Query를 이용하여 간단하게 적용해보자</h1><h2 id="usequery의-동작-원리"> <a class="anchor" href="#usequery%EC%9D%98-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>useQuery의 동작 원리 <a href="#usequery의-동작-원리" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>우리는 React에서 서버 및 외부 디펜던시와 요청을 주고 받을 때 <a href="https://tanstack.com/query/latest/docs/framework/react/overview">React Query</a>를 주로 사용합니다.</p><p>React Query는 이러한 쓰임에 맞게 낙관적 업데이트를 쉽게 구현할 수 있는 여러 툴킷을 제공하기에 직접 해당 기능을 구현하는 것 보다 매우 쉽게 낙관적 업데이트를 구현할 수 있습니다.</p><p>일반적으로 어떤 데이터를 Fetching 할 때 다음과 같은 코드를 작성할 것입니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">usePostListQuery</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nf">useQuery</span><span class="p">({</span>
	  <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">],</span>
	  <span class="na">queryFn</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">...,</span>
	  <span class="na">staleTime</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="c1">// 5분 간격으로 데이터를 Refetch</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><p>React Query는 In-memory Cache를 구현하기 위해 Query Client라는 객체를 앱 전역적으로 공유하여 사용합니다.</p><p>다시 말해, <code class="language-plaintext highlighter-rouge">useQuery</code> 훅을 이용하여 캐싱한 데이터는 Query Client 내부에 저장되어 앱 전역적으로 공유되고 있다는 뜻입니다.</p><p><code class="language-plaintext highlighter-rouge">useQuery</code>를 사용할 때 필수적으로 제공하는 프로퍼티인 <code class="language-plaintext highlighter-rouge">queryKey</code>는 이러한 캐싱 메커니즘에서 데이터를 저장하는 위치를 지칭할 때 사용하기 때문에 이를 이용하여 데이터 업데이트 요청 시 인위적으로 Query Client에 적용 된 데이터를 수정하는 것이 가능합니다.</p><p>낙관적 업데이트는 위에서 설명한 기능을 토대로 캐싱 된 데이터를 인위적으로 수정하여 UI에 반영하는 방식입니다.</p><h2 id="usemutation에서-인위적으로-데이터-수정하기"> <a class="anchor" href="#usemutation%EC%97%90%EC%84%9C-%EC%9D%B8%EC%9C%84%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%88%98%EC%A0%95%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>useMutation에서 인위적으로 데이터 수정하기 <a href="#usemutation에서-인위적으로-데이터-수정하기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>React Query를 사용하여 서버 데이터를 업데이트 할 때 <code class="language-plaintext highlighter-rouge">useMutation</code> 훅을 사용합니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">useCreatePostMutation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="nf">useMutation</span><span class="p">({</span>
		<span class="na">mutationFn</span><span class="p">:</span> <span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">...,</span>
	<span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">useMutation</code> 훅에는 <code class="language-plaintext highlighter-rouge">onMutate</code> <code class="language-plaintext highlighter-rouge">onSettled</code> <code class="language-plaintext highlighter-rouge">onSuccess</code> <code class="language-plaintext highlighter-rouge">onError</code>와 같이 다양한 이벤트를 핸들링할 수 있도록 Callback을 전달할 수 있는 프로퍼티를 지원합니다.</p><ul><li> <code class="language-plaintext highlighter-rouge">onMutate</code> - 요청 시작<li> <code class="language-plaintext highlighter-rouge">onSettled</code> - 응답 결과에 상관 없이 요청이 종료되면 발생<li> <code class="language-plaintext highlighter-rouge">onSuccess</code> - <code class="language-plaintext highlighter-rouge">mutationFn</code>에 전달한 함수의 결과가 resolve일 경우<li> <code class="language-plaintext highlighter-rouge">onError</code> - <code class="language-plaintext highlighter-rouge">mutationFn</code>에 전달한 함수의 결과가 reject일 경우</ul><p>낙관적 업데이트의 경우 ‘UI의 선반영’ 을 목적으로 하기 때문에 <code class="language-plaintext highlighter-rouge">onMutate</code> 를 이용합니다.</p><p>코드로 작성하면 아래와 같습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">useCreatePostMutation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">queryClient</span> <span class="o">=</span> <span class="nf">useQueryClient</span><span class="p">();</span>

	<span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="nf">useMutation</span><span class="p">({</span>
		<span class="na">mutationFn</span><span class="p">:</span> <span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">...,</span>
		<span class="na">onMutate</span><span class="p">:</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="nx">queryClient</span><span class="p">.</span><span class="nf">getQueryCache</span><span class="p">().</span><span class="nf">findAll</span><span class="p">({</span> <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">]</span> <span class="p">})</span>
				<span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">cache</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
					<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">queryClient</span><span class="p">.</span><span class="nf">getQueryData</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">);</span>
					<span class="nx">queryClient</span><span class="p">.</span><span class="nf">setQueryData</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">,</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">[...</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">payload</span> <span class="p">}]</span> <span class="p">});</span>
				<span class="p">});</span>
		<span class="p">},</span>
	<span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">useQueryClient</code> 훅을 사용하면 Query Client 바운더리 내부에서 Query Client에 대한 정보를 호출할 수 있습니다.</p><p>Query Client 인스턴스에는 <code class="language-plaintext highlighter-rouge">getQueryCache</code> <code class="language-plaintext highlighter-rouge">getQueryData</code> <code class="language-plaintext highlighter-rouge">setQueryData</code> 등 현재 캐싱 데이터 맵을 제어할 수 있는 여러 메소드가 존재합니다.</p><p><code class="language-plaintext highlighter-rouge">getQueryData</code>와 <code class="language-plaintext highlighter-rouge">setQueryData</code>는 <code class="language-plaintext highlighter-rouge">queryKey</code> 프로퍼티를 통해 저장 된 데이터의 읽기 및 쓰기가 가능하지만 <code class="language-plaintext highlighter-rouge">queryKey</code>가 정확히 기입 된 데이터에 대해서만 대응이 가능하기 때문에 <code class="language-plaintext highlighter-rouge">getQueryCache</code> 메소드를 통해 <code class="language-plaintext highlighter-rouge">queryKey</code>에 대한 검색을 선행하고, 검색 된 Cache에서 Query Key를 직접 호출하여 제어하는 방식으로 사용합니다.</p><h2 id="낙관적-업데이트-구현-방법-정리"> <a class="anchor" href="#%EB%82%99%EA%B4%80%EC%A0%81-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>낙관적 업데이트 구현 방법 정리 <a href="#낙관적-업데이트-구현-방법-정리" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li> <code class="language-plaintext highlighter-rouge">['post', 'all', { perPage: 100, page: 1 }]</code> 과 같은 형태로 기입 된 캐시 데이터의 경우 Query Key를 온전히 동일하게 삽입하여 수정하는게 사실상 불가능함<li>그렇기에 <code class="language-plaintext highlighter-rouge">getQueryCache</code> 메소드를 사용하여 <code class="language-plaintext highlighter-rouge">['post', 'all']</code> 로 시작하는 Query Key를 검색하여 매칭 된 전체 캐시를 불러옴<li> <code class="language-plaintext highlighter-rouge">.forEach</code>로 반복하여 해당 캐시의 Query Key를 정확히 불러온 뒤 <code class="language-plaintext highlighter-rouge">getQueryData</code> 및 <code class="language-plaintext highlighter-rouge">setQueryData</code>로 캐싱 된 데이터를 수정함</ol><h2 id="네트워크-요청이-실패한다면"> <a class="anchor" href="#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%9A%94%EC%B2%AD%EC%9D%B4-%EC%8B%A4%ED%8C%A8%ED%95%9C%EB%8B%A4%EB%A9%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>네트워크 요청이 실패한다면? <a href="#네트워크-요청이-실패한다면" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>낙관적 업데이트의 가정 자체가 ‘반드시 성공할 것’ 이기 때문에 디펜던시의 안정성을 신용하여 업데이트를 선행합니다.<br> 하지만 디펜던시를 절대적으로 신용하는 것은 매우 위험한 행동이기에, <strong>요청이 실패할 경우에 대한 예외 처리를 반드시 구현해야 합니다.</strong></p><p>해결책이야 다양하겠지만 가장 많이 쓰는 방식은 <em>‘선반영한 데이터를 원래 데이터로 돌려놓는 방식’</em> 이기에 저 역시 이 방법을 사용하겠습니다.<br> 저는 해당 작업을 ‘롤백(Rollback)’이라고 표현 하겠습니다.</p><h3 id="롤백-기능-구현-방법"> <a class="anchor" href="#%EB%A1%A4%EB%B0%B1-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>롤백 기능 구현 방법 <a href="#롤백-기능-구현-방법" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">useMutation</code> 훅의 <code class="language-plaintext highlighter-rouge">onMutate</code>와 <code class="language-plaintext highlighter-rouge">onSuccess</code> <code class="language-plaintext highlighter-rouge">onSettled</code> <code class="language-plaintext highlighter-rouge">onError</code> 이벤트는 데이터를 단방향으로 전송할 수 있습니다.</p><p><code class="language-plaintext highlighter-rouge">onMutate</code>에서 어떤 데이터를 Return 하면 <code class="language-plaintext highlighter-rouge">onSettled</code> <code class="language-plaintext highlighter-rouge">onSuccess</code> <code class="language-plaintext highlighter-rouge">onError</code>의 세번째 매개변수에서 해당 Return 값을 받아오는 것이 가능합니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre> <span class="kd">const</span> <span class="nx">useCreatePostMutation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">queryClient</span> <span class="o">=</span> <span class="nf">useQueryClient</span><span class="p">();</span>

	<span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="nf">useMutation</span><span class="p">({</span>
		<span class="na">mutationFn</span><span class="p">:</span> <span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">...,</span>
		<span class="na">onMutate</span><span class="p">:</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="kd">const</span> <span class="nx">previousPostListData</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="nx">QueryKey</span><span class="p">,</span> <span class="nx">Data</span><span class="o">&gt;</span><span class="p">();</span>
		
			<span class="nx">queryClient</span><span class="p">.</span><span class="nf">getQueryCache</span><span class="p">().</span><span class="nf">findAll</span><span class="p">({</span> <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">]</span> <span class="p">})</span>
				<span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">cache</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
					<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">queryClient</span><span class="p">.</span><span class="nf">getQueryData</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">);</span>
					<span class="nx">queryClient</span><span class="p">.</span><span class="nf">setQueryData</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">,</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">[...</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">payload</span> <span class="p">}]</span> <span class="p">});</span>
					<span class="nx">previousPostListData</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
				<span class="p">});</span>
				
			<span class="k">return</span> <span class="p">{</span>
				<span class="nx">previousPostListData</span><span class="p">,</span>
			<span class="p">};</span>
		<span class="p">},</span>
	<span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 로직은 <code class="language-plaintext highlighter-rouge">previousPostListData</code> 라는 Map 변수를 <code class="language-plaintext highlighter-rouge">onMutate</code>에서 Return 하는 로직이 추가 되었습니다.</p><p>낙관적 업데이트를 수행하는 도중 <code class="language-plaintext highlighter-rouge">.forEach</code> 내부에서 기존 데이터를 Map에 삽입하고 <code class="language-plaintext highlighter-rouge">onMutate</code> 의 반환 값으로 사용합니다.</p><p>최종적으로는 <code class="language-plaintext highlighter-rouge">onSettle</code> <code class="language-plaintext highlighter-rouge">onError</code> <code class="language-plaintext highlighter-rouge">onSuccess</code> 에서 다음과 같이 받아올 수 있습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre> <span class="kd">const</span> <span class="nx">useCreatePostMutation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">queryClient</span> <span class="o">=</span> <span class="nf">useQueryClient</span><span class="p">();</span>

	<span class="kd">const</span> <span class="nx">mutation</span> <span class="o">=</span> <span class="nf">useMutation</span><span class="p">({</span>
		<span class="na">mutationFn</span><span class="p">:</span> <span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">...,</span>
		<span class="na">onMutate</span><span class="p">:</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="kd">const</span> <span class="nx">previousPostListData</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="nx">QueryKey</span><span class="p">,</span> <span class="nx">Data</span><span class="o">&gt;</span><span class="p">();</span>
		
			<span class="nx">queryClient</span><span class="p">.</span><span class="nf">getQueryCache</span><span class="p">().</span><span class="nf">findAll</span><span class="p">({</span> <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">]</span> <span class="p">})</span>
				<span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">cache</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
					<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">queryClient</span><span class="p">.</span><span class="nf">getQueryData</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">);</span>
					<span class="nx">queryClient</span><span class="p">.</span><span class="nf">setQueryData</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">,</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">[...</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">payload</span> <span class="p">}]</span> <span class="p">});</span>
					<span class="nx">previousPostListData</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">queryKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
				<span class="p">});</span>
				
			<span class="k">return</span> <span class="p">{</span>
				<span class="nx">previousPostListData</span><span class="p">,</span>
			<span class="p">};</span>
		<span class="p">},</span>
		<span class="na">onError</span><span class="p">:</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">__</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="k">if </span><span class="p">(</span><span class="nx">ctx</span><span class="p">?.</span><span class="nx">previousPostListData</span><span class="p">)</span> <span class="p">{</span>
				<span class="c1">// ...</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">onError</code> Callback의 세번째 매개변수로 <code class="language-plaintext highlighter-rouge">previousPostListData</code> 를 받아올 수 있습니다.</p><p>언제나 유효하게 존재하는 값이 아닐 수 있기 때문에 <code class="language-plaintext highlighter-rouge">if</code>문 등을 사용하여 유효한 값인지 검사를 진행한 후 롤백 로직을 구현하면 됩니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">{</span>
	<span class="c1">// ... useMutation 로직들</span>
	<span class="na">onError</span><span class="p">:</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">__</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="k">if </span><span class="p">(</span><span class="nx">ctx</span><span class="p">?.</span><span class="nx">previousPostListData</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">ctx</span><span class="p">.</span><span class="nx">previousPostListData</span><span class="p">.</span><span class="nf">forEach</span><span class="p">((</span><span class="nx">value</span><span class="p">,</span> <span class="nx">queryKey</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
				<span class="nx">queryClient</span><span class="p">.</span><span class="nf">setQueryData</span><span class="p">(</span><span class="nx">queryKey</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
			<span class="p">});</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span> 
</pre></table></code></div></div><p>롤백 로직은 위와 같이 구현 하실 수 있습니다.</p><p><code class="language-plaintext highlighter-rouge">queryKey</code> 와 이전 데이터를 Key-Value 쌍으로 가진 Map을 반복하여 <code class="language-plaintext highlighter-rouge">queryClient</code>의 데이터를 Set 하는 방식으로 아주 간단히 롤백 로직을 구현 하실 수 있습니다.</p><h2 id="데이터-최신화"> <a class="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B5%9C%EC%8B%A0%ED%99%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>데이터 최신화 <a href="#데이터-최신화" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>아마 눈치가 빠르신 분이라면 사용자가 기입한 데이터를 선반영 하는 작업만 수행해서는 부족하다는 것을 눈치 채셨을 겁니다.</p><p>그 이유는 사용자가 데이터를 기입할 때 <strong>데이터의 PK를 같이 전달하지는 않기 때문입니다.</strong></p><p>대부분의 경우 서버에 저장 된 데이터를 읽거나 새로 쓰기 위해서 PK를 사용합니다.<br> 그렇기 때문에 프론트엔드에서 게시물 상세 조회 페이지의 라우트를 구현할 때 <code class="language-plaintext highlighter-rouge">/pages/a40efAC32</code> 와 같이 ‘조회하고 있는 데이터의 PK’ 를 <code class="language-plaintext highlighter-rouge">path</code> 혹은 <code class="language-plaintext highlighter-rouge">SearchParams</code>로 전달하여 데이터를 호출합니다.</p><p>위에서 작성한 선반영 로직만을 기입하면 해당 데이터가 서버에 어떤 PK로 등록 되었는지 알 수 있는 방법이 없기 때문에 선반영 이후 <strong>네트워크에서 응답이 돌아오면 최신 데이터로 갱신하는 작업이 수반 되어야 합니다.</strong></p><p>React Query는 이런 케이스도 아주 간단히 처리할 수 있도록 도와줍니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="p">{</span>
	<span class="c1">// ...useMutate 로직</span>
	<span class="na">onSuccess</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">queryClient</span><span class="p">.</span><span class="nf">invalidateQueries</span><span class="p">({</span> <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 코드처럼 단 한줄만 추가하면 기존 캐싱 된 데이터를 모두 Stale 상태로 변경하여 해당 데이터를 사용하는 페이지에 방문할 때 Fetch를 진행합니다.</p><p>위에서 사용한 <code class="language-plaintext highlighter-rouge">setQueryData</code> 혹은 <code class="language-plaintext highlighter-rouge">getQueryData</code>와 다른점은 Query Key가 부분 매칭 되어도 모두 만료 처리 하기 때문에 <code class="language-plaintext highlighter-rouge">getQueryCache</code> 메소드로 모든 캐시 데이터를 검색할 필요가 없다는 점입니다.</p><h1 id="마치며"> <a class="anchor" href="#%EB%A7%88%EC%B9%98%EB%A9%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>마치며</h1><p>이번 문서에서는 Loading Indicator나 Skeleton UI보다 훨씬 진보 된 로딩 화면을 구현하는 방법에 대해서 알아 봤습니다.</p><p>저도 비교적 최근에 낙관적 업데이트를 도입해 봤는데 프론트엔드에서 UX를 개선하는 방법은 공부 하면 할수록 다양하다는 것을 느낍니다.</p><p>이 문서를 통해 여러분도 저와 같은 감상을 느끼고, 낙관적 업데이트를 도입 해보시면서 보다 나은 사용성의 앱을 세상에 많이 공개 해주시면 더할 나위 없이 기쁠 것 같습니다.</p><p>감사합니다.</p></div><applause-button class="mb6" color=rgb(79,177,186) url=https://univdev.github.io/posts/optimistic-update/ > </applause-button><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tech/'>Tech</a>, <a href='/categories/talk/'>Talk</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/react-query/" class="post-tag no-text-decoration" >React Query</a> <a href="/tags/optimistic-update/" class="post-tag no-text-decoration" >Optimistic Update</a> <a href="/tags/%EB%82%99%EA%B4%80%EC%A0%81-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8/" class="post-tag no-text-decoration" >낙관적 업데이트</a> <a href="/tags/ux/" class="post-tag no-text-decoration" >UX</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query) - Univdev&url=https://univdev.github.io/posts/optimistic-update/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query) - Univdev&u=https://univdev.github.io/posts/optimistic-update/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=사용자 경험 증대를 위한 낙관적 업데이트 (feat. React Query) - Univdev&url=https://univdev.github.io/posts/optimistic-update/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div><div class="giscus-frame" style="margin-top: 24px"><div class="giscus"></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/adapter-pattern/">서버와 클라이언트의 우아한(?) 대화 방법, Adapter Pattern (Feat. FSD)</a><li><a href="/posts/experience-teacher/">프로그래밍 교육을 진행해보며 느낀점 (멘토 활동 중간 회고)</a><li><a href="/posts/my-first-npm-library/">우아한 나의 패키지, ww-timer 회고</a><li><a href="/posts/2024-seoul-comicworld-ssul/">2024 서울 코믹월드 부스 참여한 썰 풉니다</a><li><a href="/posts/focuskeeper-renewal/">Focus Keeper 랜딩 페이지 런칭 후기 (부제: UX가 프로덕트 성공에 미치는 영향)</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/tech/">Tech</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/next-js/">Next.js</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/talk/">Talk</a> <a class="post-tag" href="/tags/vue/">Vue</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/focuskeeper-renewal/"><div class="card-body"> <em class="timeago small" date="2024-04-15 12:18:00 +0800" >2024년 04월 15일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Focus Keeper 랜딩 페이지 런칭 후기 (부제: UX가 프로덕트 성공에 미치는 영향)</h3><div class="text-muted small"><p> 저는 얼마 전에 회사에서 운영하고 있던 Focus Keeper의 랜딩 페이지를 리뉴얼하는 작업을 진행했습니다. 단순 페이지 리뉴얼이라서 별 기대를 하지 않았었는데 단순 사용성만 수정했음에도 불구하고 놀라울 정도의 지표가 측정되어 공유드리고자 이 글을 작성했습니다. Focus Keeper는 뽀모도로 기법을 차용하여 성인 ADHD 환자나 집중력이 낮은...</p></div></div></a></div><div class="card"> <a href="/posts/react-query-tutorial/"><div class="card-body"> <em class="timeago small" date="2022-10-25 23:54:00 +0800" >2022년 10월 25일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>React Query로 관리하는 효율적인 서버 데이터 핸들링</h3><div class="text-muted small"><p> React Query React Query는 네트워크에서 받아온 데이터를 관리하기 위해 처리해야 하는 다양하고 번거로운 절차들을 대신 처리해주는 라이브러리입니다. React Query npm 다운로드 횟수 주간 다운로드 횟수가 백만 회를 넘어갈 정도로 인기가 많은 라이브러리인데, 서버 데이터에 대해 어떤 문제점이 있길래 이렇게나 많은 호응을 얻을...</p></div></div></a></div><div class="card"> <a href="/posts/react-query-ssr/"><div class="card-body"> <em class="timeago small" date="2023-01-16 17:00:00 +0800" >2023년 01월 16일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SSR 환경에서의 React Query</h3><div class="text-muted small"><p> React Query는 서버와 클라이언트 사이에서 데이터를 관리하기 위한 좋은 라이브러리입니다. 자세한 설명은 React Query 문서를 확인 해주세요. SSR 환경에서 사용하기 React Query는 useQuery라는 hook을 이용하여 사용하는 점에서 알 수 있듯이 클라이언트 렌더링 때 데이터를 호출하고 관리하는 라이브러리입니다. 그러다보...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/2024-seoul-comicworld-ssul/" class="btn btn-outline-primary" prompt="이전 글"><p>2024 서울 코믹월드 부스 참여한 썰 풉니다</p></a> <a href="/posts/experience-teacher/" class="btn btn-outline-primary" prompt="다음 글"><p>프로그래밍 교육을 진행해보며 느낀점 (멘토 활동 중간 회고)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Univdev</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/tech/">Tech</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/next-js/">Next.js</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/talk/">Talk</a> <a class="post-tag" href="/tags/vue/">Vue</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-YG0J6JPJH8"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-YG0J6JPJH8'); }); </script> <script type="module"> // Import the functions you need from the SDKs you need import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js"; import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js"; // TODO: Add SDKs for Firebase products that you want to use // https://firebase.google.com/docs/web/setup#available-libraries // Your web app's Firebase configuration // For Firebase JS SDK v7.20.0 and later, measurementId is optional const firebaseConfig = { apiKey: "AIzaSyBJNPjzcl0MfmOnqKAPv_DxEKE9BTtXatQ", authDomain: "univdev-github-io.firebaseapp.com", projectId: "univdev-github-io", storageBucket: "univdev-github-io.appspot.com", messagingSenderId: "259575315621", appId: "1:259575315621:web:c6a4b474e982f56f65a14c", measurementId: "G-Z60972D1V1" }; // Initialize Firebase const app = initializeApp(firebaseConfig); const analytics = getAnalytics(app); </script>
