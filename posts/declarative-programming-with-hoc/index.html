<!DOCTYPE html><html lang="ko-KR" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="일 전"><meta name="hour-prompt" content="시간 전"><meta name="minute-prompt" content="분 전"><meta name="justnow-prompt" content="방금"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트" /><meta name="author" content="박 찬영" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="프론트엔드 엔지니어 박찬영입니다." /><meta property="og:description" content="프론트엔드 엔지니어 박찬영입니다." /><link rel="canonical" href="https://univdev.github.io/posts/declarative-programming-with-hoc/" /><meta property="og:url" content="https://univdev.github.io/posts/declarative-programming-with-hoc/" /><meta property="og:site_name" content="Univdev" /><meta property="og:image" content="https://univdev.github.io/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-11-00-56.png" /><meta property="og:image:alt" content="HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-05-08T09:44:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://univdev.github.io/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-11-00-56.png" /><meta name="twitter:image:alt" content="HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트" /><meta property="twitter:title" content="HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@박 찬영" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"박 찬영"},"dateModified":"2024-05-08T09:44:00+08:00","datePublished":"2024-05-08T09:44:00+08:00","description":"프론트엔드 엔지니어 박찬영입니다.","headline":"HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트","image":{"alt":"HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트","url":"https://univdev.github.io/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-11-00-56.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://univdev.github.io/posts/declarative-programming-with-hoc/"},"url":"https://univdev.github.io/posts/declarative-programming-with-hoc/"}</script><title>HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트 | Univdev</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Univdev"><meta name="application-name" content="Univdev"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css"> <script src="https://unpkg.com/applause-button/dist/applause-button.js"></script> <script src="https://giscus.app/client.js" data-repo="univdev/univdev.github.io" data-repo-id="R_kgDOKFGzfQ" data-category="Comments" data-category-id="DIC_kwDOKFGzfc4CfAOI" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="ko" crossorigin="anonymous" async> </script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanumgothic.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-T5JJBHH');</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8120097309829946" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T5JJBHH" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="sidebar" class="d-flex flex-column align-items-end" lang="ko-KR"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Univdev</a></div><div class="site-subtitle font-italic">프론트엔드 엔지니어 박찬영입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/recommends/" class="nav-link"> <i class="fa-fw fas fa-thumbs-up ml-xl-3 mr-xl-3 unloaded"></i> <span>추천사</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/univdev" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pcydeveloper','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/univdev">박 찬영</a> </em></div><div class="d-flex"><div> <span> 게시 <em class="timeago" date="2024-05-08 09:44:00 +0800" data-toggle="tooltip" data-placement="bottom" title="2024-05-08, 09:44 +0800" >2024년 05월 08일</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3484 단어"> <em>19 분</em>읽는 시간</span></div></div></div><div class="post-content"><ul id="toc" class="section-nav"><li class="toc-entry toc-h1"><a href="#ui-컴포넌트">UI 컴포넌트</a><ul><li class="toc-entry toc-h2"><a href="#왜-복잡한-컴포넌트도-순수하게-관리해야-하나요">왜 복잡한 컴포넌트도 순수하게 관리해야 하나요?</a></ul><li class="toc-entry toc-h1"><a href="#container-컴포넌트">Container 컴포넌트</a><ul><li class="toc-entry toc-h2"><a href="#왜-props를-사용하지-않고-container-컴포넌트로-분리-하나요">왜 Props를 사용하지 않고 Container 컴포넌트로 분리 하나요?</a><li class="toc-entry toc-h2"><a href="#container-컴포넌트는-문제가-없나요">Container 컴포넌트는 문제가 없나요?</a></ul><li class="toc-entry toc-h1"><a href="#비즈니스-로직을-hoc에게-위임해보자">비즈니스 로직을 HOC에게 위임해보자</a><ul><li class="toc-entry toc-h2"><a href="#hoc를-활용한-데이터-바인딩의-또다른-장점">HOC를 활용한 데이터 바인딩의 또다른 장점</a></ul><li class="toc-entry toc-h1"><a href="#번외-suspense와-hoc를-활용한-선언적인-스켈레톤-코드">번외) Suspense와 HOC를 활용한 선언적인 스켈레톤 코드</a><li class="toc-entry toc-h1"><a href="#후기">후기</a></ul><p><img data-src="/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-11-00-56.png" alt="HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트" data-proofer-ignore></p><p>UI 컴포넌트와 비즈니스 컴포넌트를 서로 적절한 수준에서 분리하여 작업하는 것은 저에게 있어 가장 큰 숙제이자 난관이었습니다.<br> 비교적 최근까지도 저는 여러가지 고민과 시도를 반복하며 보다 나은 코드와 파일 구조를 작성하는데 하루의 대부분의 시간을 보냈습니다.</p><ul><li>동일한 UI 컴포넌트를 바라보는 수많은 Container 컴포넌트를 어떻게 관리해야 할까?<li>UI 컴포넌트가 꼭 필요할까? (재사용성 안높아보이는건 일단 Container로 만들고 나중에 분리할까?)</ul><p>이와 같은 고민들을 수차례 반복하며 점점 더 복잡해져만 가는 파일 구조, 코드 복잡도와 전쟁을 벌이고 있었습니다.<br> 이 부분을 HOC를 통해 해결하여 나름 쾌적한 코드 스멜을 맡으며 작업하고 있기에 이 경험을 공유하고자 이 문서를 작성하였습니다.</p><p>일단 본론으로 들어가기 전에 UI 컴포넌트와 Container 컴포넌트가 무엇인지 설명하겠습니다.</p><h1 id="ui-컴포넌트"> <a class="anchor" href="#ui-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>UI 컴포넌트</h1><p>UI 컴포넌트는 순수하게 <code class="language-plaintext highlighter-rouge">props</code>를 전달하면 UI에 반영 되어 보여지는 컴포넌트입니다.</p><p>그 어떤 비즈니스 로직과도 연결 되어 있지 않아, 페이지 여러 곳에서 사용할 수 있는 컴포넌트의 기본 목적에 가장 충실한 컴포넌트라고 볼 수 있습니다.</p><p><img data-src="/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-10-45-52.png" alt="Button 예시" width="160" data-proofer-ignore></p><p>가장 간단한 예를 들자면 위 사진과 같은 버튼을 예시로 들 수 있습니다.</p><p>하지만 실제 프로젝트를 수행하면서 컴포넌트로 관리하고자 하는 UI는 위 버튼처럼 Atomic한 컴포넌트만 존재하지 않습니다.</p><p><img data-src="/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-10-46-23.png" alt="Form 예시" width="288" data-proofer-ignore></p><p>위 날짜 입력 Form처럼 굉장히 복잡한 수준의 컴포넌트도 충분히 UI 컴포넌트로 관리하고 싶을 수 있습니다.</p><h2 id="왜-복잡한-컴포넌트도-순수하게-관리해야-하나요"> <a class="anchor" href="#%EC%99%9C-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%8F%84-%EC%88%9C%EC%88%98%ED%95%98%EA%B2%8C-%EA%B4%80%EB%A6%AC%ED%95%B4%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>왜 복잡한 컴포넌트도 순수하게 관리해야 하나요? <a href="#왜-복잡한-컴포넌트도-순수하게-관리해야-하나요" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>우리가 게시판을 만들어 본 적이 한 번이라도 있다면 충분히 경험했을 상황을 예로 들겠습니다.</p><p><img data-src="/assets/post_images/2024-05-08-declarative-programming-with-hoc/2024-05-08-10-46-41.png" alt="게시판 예시" data-proofer-ignore></p><p>위 사진과 같은 게시글 작성 Form이 존재한다고 가정해봅시다.</p><p>위 게시판에서 <strong>‘글을 작성한다’</strong>는 시나리오를 수행한다고 생각해보면 프로세스는 다음과 같을 것입니다.</p><ol><li>사용자는 게시글 작성 버튼을 눌러서 게시글 작성 페이지에 접속한다.<li>에디터에 게시글을 입력한다.<li>작성 버튼을 누른다.</ol><p>매우 간단한 프로세스입니다.</p><p>하지만 <strong>‘글을 수정한다.’</strong>는 시나리오를 생각해보면 어떨까요?</p><ol><li>사용자는 게시글을 수정 버튼을 누른다.<li>게시글 작성 당시와 동일한 기능을 지원하는 게시글 작성 Form에서 수정을 진행한다.<li>수정 버튼을 눌러 수정을 완료한다.</ol><p>게시글 수정의 경우 기존에 사용자가 입력했던 게시글의 제목과 내용 등을 모두 불러와 Form에 초기부터 입력이 되도록 구현해야 합니다.</p><p>이럴 때 작성 Form과 수정 Form이 동일한 기능을 지원하게 하면서, 상황에 따라 일부 기능의 수정이 가능하도록 구현할 필요가 있습니다.</p><p>그렇기 때문에 <strong>Form과 같은 유기체 성격의 컴포넌트도 UI 컴포넌트로 분리할 필요가 있는 것입니다.</strong></p><h1 id="container-컴포넌트"> <a class="anchor" href="#container-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Container 컴포넌트</h1><p>Container 컴포넌트는 다른 말로 Business 컴포넌트라고도 불립니다. 말 그대로 특정 도메인 안에서만 쓰이는 로직이 포함 된 컴포넌트입니다.</p><p>방금 전에 언급 했던 게시글 작성과 수정으로 예시를 들겠습니다.</p><p>우리는 게시판의 유연한 사용을 위해 <code class="language-plaintext highlighter-rouge">PostForm.tsx</code> 라는 UI 컴포넌트를 만들었다고 생각해봅시다.</p><p><code class="language-plaintext highlighter-rouge">PostForm.tsx</code> 을 사용하여 게시글 수정 기능을 구현하고자 한다면 다음과 같이 구현할 수 있습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="cm">/*
 * PostForm.tsx를 사용하여 게시글 수정을 진행하기 위한 Container 컴포넌트입니다.
 */</span>
<span class="kd">const</span> <span class="nx">UpdatePostFormContainer</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="p">[</span><span class="nx">post</span><span class="p">,</span> <span class="nx">setPost</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span><span class="p">();</span>
	
	<span class="nf">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nf">fetch</span><span class="p">(</span><span class="nx">POST_SERVER_DOMAIN</span><span class="p">)</span>
			<span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span>
			<span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nf">setPost</span><span class="p">(</span><span class="nx">post</span><span class="p">));</span>
	<span class="p">},</span> <span class="p">[]);</span>
	
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">PostForm</span>
			<span class="si">{</span> <span class="p">...</span><span class="nx">post</span> <span class="si">}</span>
		<span class="p">/&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><ol><li> <code class="language-plaintext highlighter-rouge">fetch</code> API를 사용하여 게시글을 불러옵니다.<li> <code class="language-plaintext highlighter-rouge">PostForm</code> 컴포넌트에 불러온 데이터를 Bind합니다.</ol><p>이처럼 ‘특정 API 서버’와 같은 다른 프로젝트에서 재사용하기 매우 어려운, 비즈니스 로직에 깊게 연관 된 로직이 포함 된 컴포넌트를 Container 컴포넌트라고 부릅니다.</p><h2 id="왜-props를-사용하지-않고-container-컴포넌트로-분리-하나요"> <a class="anchor" href="#%EC%99%9C-props%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EA%B3%A0-container-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%A1%9C-%EB%B6%84%EB%A6%AC-%ED%95%98%EB%82%98%EC%9A%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>왜 Props를 사용하지 않고 Container 컴포넌트로 분리 하나요? <a href="#왜-props를-사용하지-않고-container-컴포넌트로-분리-하나요" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>결론부터 말씀 드리자면 <strong>관심사를 분리하기 위해</strong> 사용합니다.</p><p><code class="language-plaintext highlighter-rouge">props</code>를 사용한다는 것은 다른 말로 하자면 컴포넌트를 사용하는 레이어에서 <code class="language-plaintext highlighter-rouge">props</code>로 전달할 데이터를 Fetching 하는 작업이 수반 되어야 한다는 얘기입니다.</p><p>대부분의 경우 컴포넌트에 넘겨줄 데이터를 Fetching 하는 주체는 페이지가 될 것입니다. UI 요소를 배치하고자 하는 경우 페이지에 배치해야 하기 때문입니다.</p><p>하지만 Page의 경우 대부분 수행하고자 하는 코드의 무게가 무겁습니다.</p><p>페이지에는 보통 UI를 배치하는 코드만으로도 부담이 상당히 가해집니다. 여기에 데이터를 Fetching하는 코드에 대한 책임마저 페이지에게 일임한다면 페이지의 복잡도는 기하급수적으로 증가하게 될 것입니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ComplexPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">setError</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">query</span><span class="p">,</span> <span class="nx">setQuery</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">);</span>

  <span class="nf">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nf">fetch</span><span class="p">(</span><span class="s2">`https://api.example.com/data?query=</span><span class="p">${</span><span class="nx">query</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span>
      <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">setData</span><span class="p">)</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">setError</span><span class="p">)</span>
      <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nf">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">query</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">handleChange</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setQuery</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">handleRefresh</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nf">fetch</span><span class="p">(</span><span class="s2">`https://api.example.com/data?query=</span><span class="p">${</span><span class="nx">query</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span>
      <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">setData</span><span class="p">)</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">setError</span><span class="p">)</span>
      <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nf">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Complex Page Example<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Error loading data!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span><span class="si">}</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="p">=</span><span class="s">"text"</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">query</span><span class="si">}</span> <span class="na">onChange</span><span class="p">=</span><span class="si">{</span><span class="nx">handleChange</span><span class="si">}</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleRefresh</span><span class="si">}</span><span class="p">&gt;</span>Refresh<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">loading</span> <span class="p">?</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Loading...<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
      <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">index</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">))</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">)</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComplexPage</span><span class="p">;</span>

<span class="c1">// 😱😱😱😱😱</span>
</pre></table></code></div></div><p>그렇기에 이미 관심사가 잘 분리 되어 있는 UI 컴포넌트를 기준으로 비즈니스 로직을 추가한 Container 컴포넌트를 제작하여 관리하는 것입니다.</p><h2 id="container-컴포넌트는-문제가-없나요"> <a class="anchor" href="#container-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%8A%94-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EC%97%86%EB%82%98%EC%9A%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>Container 컴포넌트는 문제가 없나요? <a href="#container-컴포넌트는-문제가-없나요" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>비즈니스 코드가 수정 되어야 하는 일부 상황에서 동일한 UI 컴포넌트를 참조하는 Container 컴포넌트가 많아질 수 있다는 단점이 존재합니다.</p><ul><li>게시물을 불러오는 API 서버가 서로 다른 Endpoint를 가지는 경우<li>각각의 상황에서 Fetching하는 게시물의 interface가 서로 상이하여 이를 규격화 할 필요가 있는 경우</ul><p>위 예시처럼 비즈니스 로직이 조금씩 상이하여 재사용이 어려운 경우 새로운 컴포넌트를 다시 만들어서 비즈니스 로직을 연결해야 하는데, 이렇게 구현할 경우 아래와 같이 불필요하게 복잡하고 많은 Container 컴포넌트가 생겨날 수 있습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">-</span> <span class="nx">EditPostFormContainer</span><span class="p">.</span><span class="nx">tsx</span>
<span class="o">-</span> <span class="nx">FreeBoardPostFormContainer</span><span class="p">.</span><span class="nx">tsx</span>
<span class="o">-</span> <span class="nx">HumorBoardPostFormContainer</span><span class="p">.</span><span class="nx">tsx</span>
<span class="o">-</span> <span class="nx">AwesomePostFormContainer</span><span class="p">.</span><span class="nx">tsx</span>

<span class="p">...</span>
</pre></table></code></div></div><h1 id="비즈니스-로직을-hoc에게-위임해보자"> <a class="anchor" href="#%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EB%A1%9C%EC%A7%81%EC%9D%84-hoc%EC%97%90%EA%B2%8C-%EC%9C%84%EC%9E%84%ED%95%B4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>비즈니스 로직을 HOC에게 위임해보자</h1><p>HOC는 특정 함수를 통해 새로운 컴포넌트를 반환하는 구현 방법입니다.</p><p>HOC의 구현 및 사용 방법은 다음과 같습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1">// PostForm.tsx</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostForm</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">content</span> <span class="p">}:</span> <span class="nx">PostFormProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">input</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">title</span><span class="si">}</span> <span class="na">name</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
			<span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">name</span><span class="p">=</span><span class="s">"content"</span><span class="p">&gt;</span><span class="si">{</span> <span class="nx">content</span> <span class="si">}</span><span class="p">&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
		<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>이처럼 <code class="language-plaintext highlighter-rouge">title</code>과 <code class="language-plaintext highlighter-rouge">content</code>를 전달 받아 Form을 구현하는 UI 컴포넌트가 있습니다.</p><p>이 컴포넌트에 데이터를 자동으로 할당해주는 HOC를 구현해봅시다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// withPostData.ts</span>

<span class="kd">const</span> <span class="nx">withPostData</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Component</span><span class="p">:</span> <span class="nx">ComponentType</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">PostForm</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="p">[</span><span class="nx">post</span><span class="p">,</span> <span class="nx">setPost</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">();</span>
		
		<span class="nf">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="nf">fetch</span><span class="p">(</span><span class="nx">POST_SERVER_DOMAIN</span><span class="p">)</span>
				<span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span>
				<span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nf">setPost</span><span class="p">(</span><span class="nx">post</span><span class="p">));</span>
		<span class="p">},</span> <span class="p">[]);</span>
	
		<span class="k">return </span><span class="p">(</span>
			<span class="p">&lt;</span><span class="nc">Component</span>
				<span class="na">title</span><span class="p">=</span><span class="si">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
				<span class="na">content</span><span class="p">=</span><span class="si">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">content</span><span class="si">}</span>
			<span class="p">/&gt;</span>
		<span class="p">);</span>
	<span class="p">};</span>
<span class="p">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">withPostData</code> 라는 함수는 JSX Element를 반환하는 함수를 반환하도록 구현되어 있습니다.</p><p>다시 말해, React Component를 함수 내에서 자체적으로 제작하여 반환한다는 뜻입니다.</p><p>그러므로 페이지에서 다음과 같이 사용할 수 있습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// page.tsx</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">Page</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">PostFormWithData</span> <span class="p">/&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PostFormWithData</span> <span class="o">=</span> <span class="nf">withPostData</span><span class="p">(</span><span class="nx">PostForm</span><span class="p">);</span>
</pre></table></code></div></div><p>이처럼 매우 선언적인 코드로 Data Fetching, Data Bind, UI 배치와 같은 작업을 모두 수행할 수 있게 되었습니다. 🎉</p><h2 id="hoc를-활용한-데이터-바인딩의-또다른-장점"> <a class="anchor" href="#hoc%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B0%94%EC%9D%B8%EB%94%A9%EC%9D%98-%EB%98%90%EB%8B%A4%EB%A5%B8-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>HOC를 활용한 데이터 바인딩의 또다른 장점 <a href="#hoc를-활용한-데이터-바인딩의-또다른-장점" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>만약 당신이 게시판의 형태가 매우 다양한 웹사이트를 운영하고 있다고 가정해봅시다.</p><ul><li>자유게시판<li>유머게시판<li>QnA 게시판<li>등등…</ul><p>Container 컴포넌트를 활용하였다면 UI 컴포넌트에 대응 되는 Container 컴포넌트를 동일한 갯수 (혹은 그 이상)만큼 생성해야 합니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>- FreeBoardPostForm.tsx
- HumorBoardPostForm.tsx
- QnABoardPostForm.tsx

- FreeBoardEditPostFormContainer.tsx
- HumorBoardEditPostFormContainer.tsx
- QnABoardEditPostFormContainer.tsx
- ...

😱😱😱
</pre></table></code></div></div><p>하지만 당신이 HOC를 이용한 데이터 바인딩을 사용했다면 다음과 같이 간단하게 제작할 수 있습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// HumorBoardPostForm.tsx</span>

<span class="kd">const</span> <span class="nx">FreeboardEditPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">PostFormWithData</span> <span class="p">/&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PostFormWithData</span> <span class="o">=</span> <span class="nf">withPostData</span><span class="p">(</span><span class="nx">FreeBoardPostForm</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// HumorBoardPostPage.tsx</span>

<span class="kd">const</span> <span class="nx">HumorBoardEditPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">PostFormWithData</span> <span class="p">/&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PostFormWithData</span> <span class="o">=</span> <span class="nf">withPostData</span><span class="p">(</span><span class="nx">HumorBoardPostForm</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// QnABoardPostForm.tsx</span>

<span class="kd">const</span> <span class="nx">QnABoardEditPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">PostFormWithData</span> <span class="p">/&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PostFormWithData</span> <span class="o">=</span> <span class="nf">withPostData</span><span class="p">(</span><span class="nx">QnABoardPostForm</span><span class="p">);</span>
</pre></table></code></div></div><p>Container 컴포넌트의 구현 없이 매우 선언적으로 페이지 내에서 바로 게시물 수정 기능을 구현하는데 성공하였습니다. 🎉</p><p>물론 이런 이점을 누리려면 각각의 게시판이 동일한 로직을 거쳐서 게시물 데이터를 할당 받을 수 있도록 interface를 잘 구성해야 하겠습니다.</p><h1 id="번외-suspense와-hoc를-활용한-선언적인-스켈레톤-코드"> <a class="anchor" href="#%EB%B2%88%EC%99%B8-suspense%EC%99%80-hoc%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%84%A0%EC%96%B8%EC%A0%81%EC%9D%B8-%EC%8A%A4%EC%BC%88%EB%A0%88%ED%86%A4-%EC%BD%94%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>번외) Suspense와 HOC를 활용한 선언적인 스켈레톤 코드</h1><p>React 18에서 추가 된 Suspense 컴포넌트는 하위에 사용 된 컴포넌트에서 Promise가 throw 되면 <code class="language-plaintext highlighter-rouge">fallback</code> Prop으로 전달한 UI를 노출시킵니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">PromiseExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">Suspense</span> <span class="na">fallback</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">LoadingIndicator</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nc">VerySlowComponent</span> <span class="p">/&gt;</span> // 여기서 Promise를 throw하고 있다면 LoadingIndicator 노출
		<span class="p">&lt;/</span><span class="nc">Suspense</span><span class="p">&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>HOC Data Fetching 부분을 간단하게 수정하는 것만으로도 Suspense와 결합하여 스켈레톤 UI를 보여주는 선언적인 코드를 작성할 수 있습니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// withData.ts</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">withData</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="kd">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
	
	  <span class="nf">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	    <span class="nf">fakeFetch</span><span class="p">().</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
	      <span class="nf">setData</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
	    <span class="p">});</span>
	  <span class="p">},</span> <span class="p">[]);</span>
	
	  <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
	    <span class="c1">// 데이터가 아직 로드되지 않았을 때는 Suspense가 처리할 수 있도록 Promise를 throw합니다.</span>
	    <span class="k">throw</span> <span class="nf">fakeFetch</span><span class="p">();</span>
	  <span class="p">}</span>
	
	  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">data</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
	<span class="p">};</span>
<span class="p">}</span>
</pre></table></code></div></div><p>HOC를 위와 같이 작성하면 이를 사용하여 아래와 같이 구현이 가능합니다.</p><div class="language-tsx highlighter-rouge"><div class="code-header"> <span data-label-text="Tsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">PromiseExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">return </span><span class="p">(</span>
		<span class="p">&lt;</span><span class="nc">Suspense</span> <span class="na">fallback</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">LoadingIndicator</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nc">VerySlowComponent</span> <span class="p">/&gt;</span>
		<span class="p">&lt;/</span><span class="nc">Suspense</span><span class="p">&gt;</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">VerySlowComponent</span> <span class="o">=</span> <span class="nf">withData</span><span class="p">(</span><span class="nx">UIComponent</span><span class="p">);</span>
</pre></table></code></div></div><h1 id="후기"> <a class="anchor" href="#%ED%9B%84%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>후기</h1><p>이처럼 HOC를 사용하여 데이터를 쉽게 불러오고 할당하고 사용하는 방법에 대해 알아보았습니다.</p><p>문서 초입에 말씀 드렸던 것 처럼 부끄럽게도 저는 얼마 전 까지 UI 컴포넌트, Container 컴포넌트에 대한 폴더 구조와 중복 코드 관리 방법에 대해 정말 오랜 기간 고민하였습니다.</p><p>이 과정에서 정말 여러가지를 시도 해보았습니다.</p><ul><li>UI 컴포넌트를 만들지 말고 모든 컴포넌트를 Container 컴포넌트로 만들어본다던가<li>Data Fetching을 위한 Hook을 세밀하게 분리하여 페이지에서 최대한 코드 정의 없이 Hook만으로 Fetching 해본다던가</ul><p>하지만 어떤 방법을 써도 프로젝트 규모가 커지면 결국에는 스파게티가 되어버렸고, 그 스파게티를 해결하기 위해 고생만 하기도 했던 경험이 많았는데 HOC를 사용한 방법은 아직 아무런 문제 없이 쾌적한 코드 환경을 조성해주고 있습니다.</p><p>‘은총알은 없다’는 말이 있듯이, 결국에는 이 역시도 사용범위가 거대해지면 분명 어떠한 문제점이 나타날 것이라 생각합니다만 그 때는 그 상황에 맞는 해결 방법이 있으리라 믿으며 글을 마칩니다.</p></div><applause-button class="mb6" color=rgb(79,177,186) url=https://univdev.github.io/posts/declarative-programming-with-hoc/ > </applause-button><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tech/'>Tech</a>, <a href='/categories/react/'>React</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/react/" class="post-tag no-text-decoration" >React</a> <a href="/tags/hoc/" class="post-tag no-text-decoration" >HOC</a> <a href="/tags/business-component/" class="post-tag no-text-decoration" >Business Component</a> <a href="/tags/component/" class="post-tag no-text-decoration" >Component</a> <a href="/tags/ui-component/" class="post-tag no-text-decoration" >UI Component</a> <a href="/tags/ui/" class="post-tag no-text-decoration" >UI</a> <a href="/tags/refactoring/" class="post-tag no-text-decoration" >Refactoring</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트 - Univdev&url=https://univdev.github.io/posts/declarative-programming-with-hoc/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트 - Univdev&u=https://univdev.github.io/posts/declarative-programming-with-hoc/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=HOC와 UI 컴포넌트를 결합한 선언적인 비즈니스 컴포넌트 - Univdev&url=https://univdev.github.io/posts/declarative-programming-with-hoc/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div><div class="giscus-frame" style="margin-top: 24px"><div class="giscus"></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/adapter-pattern/">서버와 클라이언트의 우아한(?) 대화 방법, Adapter Pattern (Feat. FSD)</a><li><a href="/posts/experience-teacher/">프로그래밍 교육을 진행해보며 느낀점 (멘토 활동 중간 회고)</a><li><a href="/posts/my-first-npm-library/">우아한 나의 패키지, ww-timer 회고</a><li><a href="/posts/2024-seoul-comicworld-ssul/">2024 서울 코믹월드 부스 참여한 썰 풉니다</a><li><a href="/posts/focuskeeper-renewal/">Focus Keeper 랜딩 페이지 런칭 후기 (부제: UX가 프로덕트 성공에 미치는 영향)</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/tech/">Tech</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/next-js/">Next.js</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/talk/">Talk</a> <a class="post-tag" href="/tags/vue/">Vue</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/react-life-cycle/"><div class="card-body"> <em class="timeago small" date="2022-04-08 17:22:00 +0800" >2022년 04월 08일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>React의 Life Cycle</h3><div class="text-muted small"><p> 개요 라이프사이클, 즉 생명주기라는 단어는 Vue나 React와 같은 프론트엔드 개발 도구를 사용해본 경험이 있다면 누구나 한 번 쯤 들어봤을 단어입니다. 그만큼 해당 개발 도구를 사용하는데 중요한 역할을 하며, 이 부분을 잘 알고 있어야 좋은 서비스를 개발할 수 있습니다. Lifecycle Vue나 React는 컴포넌트 단위로 아주 작게 기능들을 쪼...</p></div></div></a></div><div class="card"> <a href="/posts/react-memo/"><div class="card-body"> <em class="timeago small" date="2022-04-14 10:18:00 +0800" >2022년 04월 14일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React] memo 함수를 이용한 메모이제이션</h3><div class="text-muted small"><p> React 렌더링 React의 컴포넌트는 state라고 불리는 상태값과 props라고 불리는 전달값이 있습니다. 상태값과 전달값은 컴포넌트의 렌더링와 아주 직접적인 관계가 있습니다. 상태가 변이함에 따라 컴포넌트가 보여지는 형태도 달라져야 하기 때문입니다. 그러기에 React의 컴포넌트는 state와 props의 변이를 계속 관찰하고 있고, 변이가 발...</p></div></div></a></div><div class="card"> <a href="/posts/react-absolute-import/"><div class="card-body"> <em class="timeago small" date="2022-04-22 00:00:00 +0800" >2022년 04월 22일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React] 절대 경로 import</h3><div class="text-muted small"><p> import 지옥 import Component from &#39;../../../../../../../components/BasicComponent&#39;; // ... React로 프로젝트를 개발하다보면 위와 같은 import 지옥이 되는 경우가 잦습니다. 보통 실제 라우트 구조에 맞춰서 페이지 컴포넌트를 제작하기 때문에 depth가 깊은 페이지에서 roo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/my-first-npm-library/" class="btn btn-outline-primary" prompt="이전 글"><p>우아한 나의 패키지, ww-timer 회고</p></a> <a href="/posts/unity-vscode-setting-for-mac/" class="btn btn-outline-primary" prompt="다음 글"><p>Mac OS Unity에서 VSCode를 사용하기 위한 설정 방법</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Univdev</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/tech/">Tech</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/next-js/">Next.js</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/talk/">Talk</a> <a class="post-tag" href="/tags/vue/">Vue</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-YG0J6JPJH8"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-YG0J6JPJH8'); }); </script> <script type="module"> // Import the functions you need from the SDKs you need import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js"; import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js"; // TODO: Add SDKs for Firebase products that you want to use // https://firebase.google.com/docs/web/setup#available-libraries // Your web app's Firebase configuration // For Firebase JS SDK v7.20.0 and later, measurementId is optional const firebaseConfig = { apiKey: "AIzaSyBJNPjzcl0MfmOnqKAPv_DxEKE9BTtXatQ", authDomain: "univdev-github-io.firebaseapp.com", projectId: "univdev-github-io", storageBucket: "univdev-github-io.appspot.com", messagingSenderId: "259575315621", appId: "1:259575315621:web:c6a4b474e982f56f65a14c", measurementId: "G-Z60972D1V1" }; // Initialize Firebase const app = initializeApp(firebaseConfig); const analytics = getAnalytics(app); </script>
