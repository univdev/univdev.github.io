<!DOCTYPE html><html lang="ko-KR" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="일 전"><meta name="hour-prompt" content="시간 전"><meta name="minute-prompt" content="분 전"><meta name="justnow-prompt" content="방금"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Headless 브라우저를 이용한 스냅샷 촬영 구현" /><meta name="author" content="박 찬영" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="프론트엔드 엔지니어 박찬영입니다." /><meta property="og:description" content="프론트엔드 엔지니어 박찬영입니다." /><link rel="canonical" href="https://univdev.github.io/posts/headless-browser-snapshot/" /><meta property="og:url" content="https://univdev.github.io/posts/headless-browser-snapshot/" /><meta property="og:site_name" content="Univdev" /><meta property="og:image" content="https://univdev.github.io/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-22-15-51-28.png" /><meta property="og:image:alt" content="Headless 브라우저를 이용한 스냅샷 촬영 구현" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-08-02T00:00:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://univdev.github.io/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-22-15-51-28.png" /><meta name="twitter:image:alt" content="Headless 브라우저를 이용한 스냅샷 촬영 구현" /><meta property="twitter:title" content="Headless 브라우저를 이용한 스냅샷 촬영 구현" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@박 찬영" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"박 찬영"},"dateModified":"2023-09-29T03:01:54+08:00","datePublished":"2023-08-02T00:00:00+08:00","description":"프론트엔드 엔지니어 박찬영입니다.","headline":"Headless 브라우저를 이용한 스냅샷 촬영 구현","image":{"alt":"Headless 브라우저를 이용한 스냅샷 촬영 구현","url":"https://univdev.github.io/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-22-15-51-28.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://univdev.github.io/posts/headless-browser-snapshot/"},"url":"https://univdev.github.io/posts/headless-browser-snapshot/"}</script><title>Headless 브라우저를 이용한 스냅샷 촬영 구현 | Univdev</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Univdev"><meta name="application-name" content="Univdev"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css"> <script src="https://unpkg.com/applause-button/dist/applause-button.js"></script> <script src="https://giscus.app/client.js" data-repo="univdev/univdev.github.io" data-repo-id="R_kgDOKFGzfQ" data-category="Comments" data-category-id="DIC_kwDOKFGzfc4CfAOI" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="ko" crossorigin="anonymous" async> </script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanumgothic.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-T5JJBHH');</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8120097309829946" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T5JJBHH" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="sidebar" class="d-flex flex-column align-items-end" lang="ko-KR"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Univdev</a></div><div class="site-subtitle font-italic">프론트엔드 엔지니어 박찬영입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/recommends/" class="nav-link"> <i class="fa-fw fas fa-thumbs-up ml-xl-3 mr-xl-3 unloaded"></i> <span>추천사</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/univdev" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pcydeveloper','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>Headless 브라우저를 이용한 스냅샷 촬영 구현</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Headless 브라우저를 이용한 스냅샷 촬영 구현</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/univdev">박 찬영</a> </em></div><div class="d-flex"><div> <span> 게시 <em class="timeago" date="2023-08-02 00:00:00 +0800" data-toggle="tooltip" data-placement="bottom" title="2023-08-02, 00:00 +0800" >2023년 08월 02일</em> </span> <span> 업데이트 <em class="timeago" date="2023-09-29 04:01:54 +0900 " data-toggle="tooltip" data-placement="bottom" title="2023-09-29, 04:01 +0900" >2023년 09월 29일</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2448 단어"> <em>13 분</em>읽는 시간</span></div></div></div><div class="post-content"><ul id="toc" class="section-nav"><li class="toc-entry toc-h2"><a href="#들어가며">들어가며</a><li class="toc-entry toc-h2"><a href="#dom-렌더링-엔진의-한계">DOM 렌더링 엔진의 한계</a><li class="toc-entry toc-h2"><a href="#해결-방법">해결 방법</a><ul><li class="toc-entry toc-h3"><a href="#자원의-재사용">자원의 재사용</a></ul><li class="toc-entry toc-h2"><a href="#동일한-인스턴스를-이용한-병렬-처리의-문제점">동일한 인스턴스를 이용한 병렬 처리의 문제점</a><li class="toc-entry toc-h2"><a href="#병렬-처리-vs-순차-처리">병렬 처리 vs 순차 처리</a><li class="toc-entry toc-h2"><a href="#마치며">마치며</a></ul><p><img data-src="/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-22-15-51-28.png" alt="Headless 브라우저를 이용한 스냅샷 촬영 구현" data-proofer-ignore></p><h2 id="들어가며"> <a class="anchor" href="#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>들어가며 <a href="#들어가며" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>요즘 업무가 바빠 기술 블로그에 글을 투고 한지 너무 오래 되었다는 것도 잊고 있었습니다.<br> 사정 상 주기적인 업데이트가 불가능 했어요 😢<br> 그래서 이번 포스트에서는 최근에 있었던 개발 Task 중 가장 인상 깊었던 Task를 갖고 왔습니다!</p><p><img data-src="/assets/post_images/2023-08-02-headless-browser-snapshot/editor.gif" alt="에디터" data-proofer-ignore></p><p>저는 최근에 위 움짤과 같은 에디터를 개발하고 있었습니다.<br> 디자인 편집을 가능하게 해주는 이 에디터는 브라우저의 DOM을 이용하는데요, 에디터를 어떻게 만들었는지에 대해서는 할 얘기가 정말 너무 많지만 오늘은 이 얘기에 대해서 조금 접어두고 다른 얘기를 하고자 합니다.</p><h2 id="dom-렌더링-엔진의-한계"> <a class="anchor" href="#dom-%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%97%94%EC%A7%84%EC%9D%98-%ED%95%9C%EA%B3%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>DOM 렌더링 엔진의 한계 <a href="#dom-렌더링-엔진의-한계" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>위에서 말씀 드렸다시피 이 에디터는 DOM으로 설계 되어 동작하고 있습니다.</p><p><img data-src="/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-02-19-48-26.png" alt="디자인 썸네일" data-proofer-ignore><br> 그렇다보니 이와 같이 사용자가 작업한 디자인을 미리 보여주는 스냅샷을 촬영하는게 하나의 난제로 다가오게 되었어요.<br> 왜냐면 일반적인 방법으로는 DOM에 그려진 요소들을 레스터 이미지로 만드는 방법이 존재하지 않았고, <a href="https://html2canvas.hertzen.com/">html2canvas</a>와 같은 라이브러리는 렌더링 된 화면을 온전히 그려내지 못했거든요. 이런 기능은 비단 Snapshot 뿐 아니라 유저가 제작한 디자인을 다운로드 받게 하는 <strong>핵심 기능에도 관여하기 때문에 반드시 해결해야만 하는 문제였어요.</strong></p><p>그러다가 생각해 낸 하나의 묘수가 바로 Headless 브라우저를 이용한 스냅샷 촬영이었어요.<br> 촬영 플로우는 다음과 같아요.</p><ol><li>Headless 브라우저를 이용하여 렌더링 엔진을 활성화 한다.<li>렌더링 엔진에서 사용자가 편집한 디자인을 그려낸다.<li>렌더링 엔진 자체를 Headless 브라우저의 <code class="language-plaintext highlighter-rouge">screenshot</code> 메소드를 사용하여 촬영한다.<li>base64로 반환한다.</ol><p>자, 정말 완벽한 계획이죠?</p><p>다만 이 플랜에는 한가지 단점이 있었어요.<br> <strong>렌더링 엔진을 호스팅하는 서비스에 접근하여 그려내야 한다</strong>는 점이에요.</p><p>일단 브라우저를 켜고, 렌더링 엔진 호스팅 서비스에 접근하는 행위 자체가 다소 시간이 걸린다는 점이 문제였어요.<br> 이 과정에서 병목을 최대한 줄이기 위해 가장 유명한 브라우저인 Puppeteer 대신 Playwright 브라우저를 채택하자고 아이디어를 낸 백엔드 개발팀 덕분에 브라우저 인스턴스에 대한 로딩 속도는 어느정도 해결 했지만 네트워크 접속 시간에 대해서는 어떻게 하기가 어렵더라구요.<br> 그래서 제가 생각해낸 아이디어는 ‘<strong>한번 호출한 리소스는 최대한 빼먹어보자</strong>‘였어요.</p><p>기존 스냅샷 촬영 플로우는 다음과 같아요.</p><p><img data-src="/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-28-01-10-21.png" alt="스냅샷 촬영 플로우" data-proofer-ignore></p><p>위 과정을 살펴보면 페이지 접속 혹은 렌더링에 필요한 외부 리소스를 다운로드 받는 과정들이 다수 포함 되어 있는 것을 알 수 있습니다.<br> 이로 인해 [작업물 추출] 기능에 가장 큰 성능 저하를 야기하는 부분은 네트워크 관련 부분임을 가늠할 수 있어요.</p><h2 id="해결-방법"> <a class="anchor" href="#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>해결 방법 <a href="#해결-방법" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>원인을 예상했다면 이제 어떤 부분을 바꿔 볼 수 있을까요?</p><h3 id="자원의-재사용"> <a class="anchor" href="#%EC%9E%90%EC%9B%90%EC%9D%98-%EC%9E%AC%EC%82%AC%EC%9A%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>자원의 재사용 <a href="#자원의-재사용" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>우선 위에 작성한 절차를 밟아보면 페이지를 접속한 이후 렌더링까지 꽤 많은 시간을 소모함을 알 수 있습니다.</p><ul><li>페이지 인스턴스의 생성<li>렌더링 엔진 페이지 열기<li>렌더링에 필요한 리소스 다운로드<li>브라우저의 렌더링 완료 대기</ul><p>이렇게 많은 자원을 소모하는 렌더링 프로세스를 각기 다른 해상도의 캡처를 위해 <strong>세 번이나 반복합니다.</strong></p><p>소스코드를 보면서 얘기 해볼까요?</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="nx">snapshotScales</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="k">async </span><span class="p">(</span><span class="nx">scale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newPage</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">browser</span><span class="p">.</span><span class="nf">newPage</span><span class="p">();</span> <span class="c1">// 새로운 페이지 인스턴스 생성</span>
    <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">goto</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">host</span><span class="p">}</span><span class="s2">/renderer?designId=</span><span class="p">${</span><span class="nx">designId</span><span class="p">}</span><span class="s2">&amp;scale=</span><span class="p">${</span><span class="nx">scale</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span> <span class="na">waitUntil</span><span class="p">:</span> <span class="dl">'</span><span class="s1">domcontentloaded</span><span class="dl">'</span> <span class="p">});</span>
    <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">waitForSelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.RendererScreen__Zoom</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">waitForSelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">waitForTimeout</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span> <span class="c1">// 단순 대기</span>

    <span class="kd">const</span> <span class="nx">jpgScreenshot</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">).</span><span class="nf">screenshot</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jpeg</span><span class="dl">'</span> <span class="p">});</span>
    <span class="kd">const</span> <span class="nx">pngScreenshot</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">).</span><span class="nf">screenshot</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">png</span><span class="dl">'</span> <span class="p">});</span>

    <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span> <span class="c1">// 페이지 인스턴스 닫기</span>

    <span class="nx">snapshots</span><span class="p">.</span><span class="nx">jpg</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">jpgScreenshot</span><span class="p">.</span><span class="nf">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">));</span>
    <span class="nx">snapshots</span><span class="p">.</span><span class="nx">png</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">pngScreenshot</span><span class="p">.</span><span class="nf">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>
</pre></table></code></div></div><p>위 소스코드는 <code class="language-plaintext highlighter-rouge">snapScales</code>라는 배열에 캡처할 배율을 담아두고 렌더링 엔진에 접근하는 로직을 병렬적으로 수행하고 있습니다.</p><p>이럴 경우 <code class="language-plaintext highlighter-rouge">waitForTimeout</code>으로 인해 확정적으로 500ms가 지연이 되고, 각각의 Element가 로드 되는 것을 기다리는 것 까지 합치면 거의 1초에 육박하는 대기시간을 여러번 대기하게 된다는 것을 알 수 있습니다.</p><p>그래서 아래와 같은 순서대로 수정을 진행했습니다.</p><ol><li>한번 렌더링 과정까지 마친 페이지 인스턴스는 모든 이미지를 캡처하기 까지 소멸시키지 않는다.<li>여러 해상도의 이미지는 DOM Element의 <code class="language-plaintext highlighter-rouge">scale</code>을 직접 조정하여 캡처한다.</ol><p>이렇게 수정한 코드는 아래와 같습니다.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">newPage</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">browser</span><span class="p">.</span><span class="nf">newPage</span><span class="p">();</span> <span class="c1">// 새로운 페이지 인스턴스 생성</span>
<span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">goto</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">host</span><span class="p">}</span><span class="s2">/renderer?designId=</span><span class="p">${</span><span class="nx">designId</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span> <span class="na">waitUntil</span><span class="p">:</span> <span class="dl">'</span><span class="s1">domcontentloaded</span><span class="dl">'</span> <span class="p">});</span>
<span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">waitForSelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.RendererScreen__Zoom</span><span class="dl">'</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">waitForSelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">waitForTimeout</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span> <span class="c1">// 단순 대기</span>

<span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="nx">snapshotScales</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="k">async </span><span class="p">(</span><span class="nx">scale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">evaluate</span><span class="p">((</span><span class="nx">scale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">);</span>

			<span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nf">setProperty</span><span class="p">(</span><span class="dl">'</span><span class="s1">transform</span><span class="dl">'</span> <span class="s2">`scale(</span><span class="p">${</span><span class="nx">scale</span><span class="p">}</span><span class="s2">)`</span><span class="p">);</span>
		<span class="p">},</span> <span class="nx">scale</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">jpgScreenshot</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">).</span><span class="nf">screenshot</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jpeg</span><span class="dl">'</span> <span class="p">});</span>
    <span class="kd">const</span> <span class="nx">pngScreenshot</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">).</span><span class="nf">screenshot</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">png</span><span class="dl">'</span> <span class="p">});</span>

    <span class="k">await</span> <span class="nx">newPage</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span> <span class="c1">// 페이지 인스턴스 닫기</span>

    <span class="nx">snapshots</span><span class="p">.</span><span class="nx">jpg</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">jpgScreenshot</span><span class="p">.</span><span class="nf">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">));</span>
    <span class="nx">snapshots</span><span class="p">.</span><span class="nx">png</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">pngScreenshot</span><span class="p">.</span><span class="nf">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>
</pre></table></code></div></div><p>하지만 이렇게 만들고 나니까 새로운 문제를 마주하게 되었습니다.</p><h2 id="동일한-인스턴스를-이용한-병렬-처리의-문제점"> <a class="anchor" href="#%EB%8F%99%EC%9D%BC%ED%95%9C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B3%91%EB%A0%AC-%EC%B2%98%EB%A6%AC%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>동일한 인스턴스를 이용한 병렬 처리의 문제점 <a href="#동일한-인스턴스를-이용한-병렬-처리의-문제점" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>페이지 인스턴스를 초기화 하지 않고 css를 제어하기 때문에 Promise.all을 이용하여 일괄적으로 처리 하고자 하면 연속 된 요청 도중 이전 요청에 대한 css가 남아있기 때문에 최종적인 결과물이 모두 3배율로 뽑히는 문제가 있었습니다. <img data-src="/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-06-23-03-38.png" alt="인스턴스 재활용의 문제" data-proofer-ignore><br> 이러한 상황을 해결하려면 순차적으로 이미지 추출을 처리해야 하는데 <strong>순차 처리는 일반적인 비동기 처리 상황에서 병렬 처리보다 느립니다.</strong><br> 결국 <strong>네트워크 요청을 최소화 하느냐 vs 순차적으로 처리하느냐의 Trade-Off가 발생</strong>하였고 실제로 얼마나 차이가 나는지를 알아보기 위해 아래와 같이 순차 처리 코드로 변경하고 성능을 측정하였습니다.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="k">await </span><span class="p">(</span><span class="kd">const</span> <span class="nx">scale</span> <span class="k">of</span> <span class="nx">snapshotScales</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">page</span>
    <span class="p">.</span><span class="nf">evaluate</span><span class="p">((</span><span class="nx">scale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">zoomElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.RendererScreen__Zoom</span><span class="dl">'</span><span class="p">)</span> <span class="kd">as </span><span class="nx">HTMLElement</span><span class="p">;</span>

      <span class="k">if </span><span class="p">(</span><span class="nx">zoomElement</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">zoomElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nf">setProperty</span><span class="p">(</span><span class="dl">'</span><span class="s1">transform</span><span class="dl">'</span><span class="p">,</span> <span class="s2">`scale(</span><span class="p">${</span><span class="nx">scale</span><span class="p">}</span><span class="s2">)`</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="nx">scale</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">page</span><span class="p">.</span><span class="nf">waitForTimeout</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">page</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">).</span><span class="nf">screenshot</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jpeg</span><span class="dl">'</span> <span class="p">}))</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">screenshot</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">screenshot</span><span class="p">.</span><span class="nf">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">base64</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">base64</span> <span class="o">&amp;&amp;</span> <span class="nx">snapshots</span><span class="p">.</span><span class="nx">jpg</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">base64</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">page</span><span class="p">.</span><span class="nf">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.TemplateRendererLayer</span><span class="dl">'</span><span class="p">).</span><span class="nf">screenshot</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">png</span><span class="dl">'</span> <span class="p">}))</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">screenshot</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">screenshot</span><span class="p">.</span><span class="nf">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">base64</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">base64</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">base64</span> <span class="o">&amp;&amp;</span> <span class="nx">snapshots</span><span class="p">.</span><span class="nx">png</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">base64</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="병렬-처리-vs-순차-처리"> <a class="anchor" href="#%EB%B3%91%EB%A0%AC-%EC%B2%98%EB%A6%AC-vs-%EC%88%9C%EC%B0%A8-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>병렬 처리 vs 순차 처리 <a href="#병렬-처리-vs-순차-처리" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>위에서 작성한 서버 코드를 사용하기 위해 다음과 같은 코드를 작성하고 실행하여 API 실행 전과 실행 완료 후 시간을 측정하여 그 둘을 서로 뺀 값으로 실행 시간을 측정하였습니다.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">getTime</span><span class="p">();</span> <span class="c1">// 코드 실행 시작 시간</span>

<span class="nx">apiClient</span>
  <span class="p">.</span><span class="nx">axios</span>
	<span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://localhost:3000/api/snapshot</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">params</span><span class="p">:</span> <span class="p">{</span> <span class="nx">designId</span> <span class="p">}</span> <span class="p">})</span>
	  <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
	  <span class="p">.</span><span class="nf">then</span><span class="p">(({</span> <span class="na">snapshots</span><span class="p">:</span> <span class="p">{</span> <span class="nx">jpg</span><span class="p">,</span> <span class="nx">png</span> <span class="p">}</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
	    <span class="kd">const</span> <span class="nx">end</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">getTime</span><span class="p">();</span> <span class="c1">// 코드 실행 종료 시간</span>
	    <span class="kd">const</span> <span class="nx">gap</span> <span class="o">=</span> <span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">;</span> <span class="c1">// 종료 시간에서 시작 시간을 뺀 실제 실행 시간</span>
	
	    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">gap</span><span class="p">);</span> <span class="c1">// &lt;-- 실행 시간 출력</span>
	    <span class="nx">jpg</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">url</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	      <span class="kd">const</span> <span class="nx">anchor</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
	
	      <span class="nx">anchor</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">`data:image/jpg;base64,</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
	      <span class="nx">anchor</span><span class="p">.</span><span class="nx">download</span> <span class="o">=</span> <span class="s2">`url</span><span class="p">${</span><span class="nx">key</span><span class="p">}</span><span class="s2">.jpg`</span><span class="p">;</span>
	
	      <span class="nx">anchor</span><span class="p">.</span><span class="nf">click</span><span class="p">();</span>
	      <span class="nx">anchor</span><span class="p">.</span><span class="nf">remove</span><span class="p">();</span>
	    <span class="p">});</span>
	
	    <span class="nx">png</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">url</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	      <span class="kd">const</span> <span class="nx">anchor</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
	
	      <span class="nx">anchor</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">`data:image/png;base64,</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
	      <span class="nx">anchor</span><span class="p">.</span><span class="nx">download</span> <span class="o">=</span> <span class="s2">`url</span><span class="p">${</span><span class="nx">key</span><span class="p">}</span><span class="s2">.png`</span><span class="p">;</span>
	
	      <span class="nx">anchor</span><span class="p">.</span><span class="nf">click</span><span class="p">();</span>
	      <span class="nx">anchor</span><span class="p">.</span><span class="nf">remove</span><span class="p">();</span>
	    <span class="p">});</span>
	  <span class="p">});</span>
</pre></table></code></div></div><p>성능은 아래와 같이 나왔습니다. <img data-src="/assets/post_images/2023-08-02-headless-browser-snapshot/2023-08-06-23-08-01.png" alt="측정 결과" data-proofer-ignore><br> <strong>3000ms대의 결과가 병렬 처리를 이용한 방식이고, 2000ms 대의 결과가 순차 처리를 이용한 방식입니다.</strong></p><p>비동기 로직을 처리하는 대부분의 Case에서는 순차 처리가 병렬 처리보다 느리다는 것이 일반적이지만 페이지 인스턴스를 재사용하여 네트워크 요청을 최소화 하는 편이 이번과 같은 Case에서는 순차 처리 로직이 더욱 긍정적인 퍼포먼스를 발휘할 수도 있다는 것을 알게 되었습니다.</p><h2 id="마치며"> <a class="anchor" href="#%EB%A7%88%EC%B9%98%EB%A9%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>마치며 <a href="#마치며" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>다만 이와 같은 Case에서는 <strong>무수한 환경적 요인이 작용합니다.</strong></p><p>스크린샷을 촬영하는 컴퓨터와 네트워크의 환경이 위의 테스트 환경보다 좋다면 Content Delivery 속도 또한 증가하여 본 문서와 다른 결과가 나올 수도 있기에 네트워크 속도가 느린 서비스 환경에서 참고한다면 성능 개선을 기대할 수 있겠지만 그렇지 않다면 오히려 성능 저하를 발생시킬 수도 있음을 유의해야 할 것 같습니다.</p></div><applause-button class="mb6" color=rgb(79,177,186) url=https://univdev.github.io/posts/headless-browser-snapshot/ > </applause-button><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tech/'>Tech</a>, <a href='/categories/talk/'>Talk</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Headless 브라우저를 이용한 스냅샷 촬영 구현 - Univdev&url=https://univdev.github.io/posts/headless-browser-snapshot/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Headless 브라우저를 이용한 스냅샷 촬영 구현 - Univdev&u=https://univdev.github.io/posts/headless-browser-snapshot/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Headless 브라우저를 이용한 스냅샷 촬영 구현 - Univdev&url=https://univdev.github.io/posts/headless-browser-snapshot/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div><div class="giscus-frame" style="margin-top: 24px"><div class="giscus"></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/adapter-pattern/">서버와 클라이언트의 우아한(?) 대화 방법, Adapter Pattern (Feat. FSD)</a><li><a href="/posts/experience-teacher/">프로그래밍 교육을 진행해보며 느낀점 (멘토 활동 중간 회고)</a><li><a href="/posts/my-first-npm-library/">우아한 나의 패키지, ww-timer 회고</a><li><a href="/posts/2024-seoul-comicworld-ssul/">2024 서울 코믹월드 부스 참여한 썰 풉니다</a><li><a href="/posts/focuskeeper-renewal/">Focus Keeper 랜딩 페이지 런칭 후기 (부제: UX가 프로덕트 성공에 미치는 영향)</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/tech/">Tech</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/next-js/">Next.js</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/talk/">Talk</a> <a class="post-tag" href="/tags/vue/">Vue</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/created-tech-blog/"><div class="card-body"> <em class="timeago small" date="2022-01-19 22:25:00 +0800" >2022년 01월 19일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>기술 블로그를 시작하게 된 이유</h3><div class="text-muted small"><p> 누구세요? 안녕하세요? 프론트엔드 개발자 박찬영입니다. 특성화 고등학교를 졸업한 이후 대학도 열심히 다니고 회사 일도 열심히 하면서 살아가는 평범한 개발자입니다. 블로그를 개설한 이유 저는 벌써 약 3년 6개월의 경력을 갖게 되었습니다. 4년차인거죠. 나름 회사에서 인정도 받으며 커리어를 쌓고 있으니 한참 자신감이 뿜뿜하던 2021년. 개발 과정에서...</p></div></div></a></div><div class="card"> <a href="/posts/react-native-calendar-opensource-review/"><div class="card-body"> <em class="timeago small" date="2022-01-21 22:11:00 +0800" >2022년 01월 21일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>React Native Calendars를 통해 오픈소스를 파헤쳐보자</h3><div class="text-muted small"><p> 기존에 사용하던 오픈소스 회사에서 개발하고 있는 서비스 앱에 다음과 같은 캘린더가 있습니다. 이 캘린더는 다음과 같은 기능을 합니다. 날짜 선택 버튼을 누르면 Navigation을 통해 표시가 된다. 날짜를 선택하면 해당 날짜에 작성 된 자신의 글이 목록에 노출 된다. 세로 방향으로 스크롤을 하면서 1개월씩 뒤로 앞으로 이동할 수 있다....</p></div></div></a></div><div class="card"> <a href="/posts/product-tech-blog-of-company/"><div class="card-body"> <em class="timeago small" date="2022-01-24 11:59:00 +0800" >2022년 01월 24일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>회사 기술 블로그 구축 완료!</h3><div class="text-muted small"><p> 회사 기술 블로그 구축 현재 제가 다니고 있는 회사 단감소프트의 기술 블로그를 구축했습니다. 회사 업무로 인해 마주친 이슈들과 그 해결 방법들을 주로 올리게 될 것이며, 제가 작성한 문서 중 일부는 이 블로그에도 옮겨올 계획입니다. 기술 블로그의 장점 기술 블로그의 장점은 다음과 같습니다. 기술적인 이슈들을 기록하므로, 같은 이슈가 벌어졌을 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/vscode-snippets-custom/" class="btn btn-outline-primary" prompt="이전 글"><p>VSCode User Snippet 알아보기</p></a> <a href="/posts/amplitude-taxonomy-for-fe/" class="btn btn-outline-primary" prompt="다음 글"><p>사용자의 액션을 분석해보자! Amplitude의 Taxonomy 연동 방법</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Univdev</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/tech/">Tech</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/next-js/">Next.js</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/talk/">Talk</a> <a class="post-tag" href="/tags/vue/">Vue</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-YG0J6JPJH8"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-YG0J6JPJH8'); }); </script> <script type="module"> // Import the functions you need from the SDKs you need import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js"; import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js"; // TODO: Add SDKs for Firebase products that you want to use // https://firebase.google.com/docs/web/setup#available-libraries // Your web app's Firebase configuration // For Firebase JS SDK v7.20.0 and later, measurementId is optional const firebaseConfig = { apiKey: "AIzaSyBJNPjzcl0MfmOnqKAPv_DxEKE9BTtXatQ", authDomain: "univdev-github-io.firebaseapp.com", projectId: "univdev-github-io", storageBucket: "univdev-github-io.appspot.com", messagingSenderId: "259575315621", appId: "1:259575315621:web:c6a4b474e982f56f65a14c", measurementId: "G-Z60972D1V1" }; // Initialize Firebase const app = initializeApp(firebaseConfig); const analytics = getAnalytics(app); </script>
